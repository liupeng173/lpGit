<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>倒计时</title>
		<style>
			.wp {
				width: 300px;
				margin: 50px auto;
			}
			.wp h1 {
				width: 160px;
				margin: 10px auto;
			}
			.wp input {
				width: 100px;
			}
		</style>
	</head>
	<body>
		
		<div class="wp">
			<h1 id="clock">00:00:00</h1>
			<input id="time" type="text" />
			<select id="unit" name="">
				<option value="0">请选择</option>
				<option value="3600">小时</option>
				<option value="60">分钟</option>
				<option value="1">秒</option>
			</select>
			<button id="addBut">开始倒计时</button>
		</div>
		<script>
			var countDonw = function (){
				var addBut = document.getElementById('addBut');
				var clock = document.getElementById('clock');
				
				
				addBut.onclick = function (){
					var time = document.getElementById('time').value;
					var unit = document.getElementById('unit').value;
					var totalSeconds ;
					var h, m ,s;
					var times;
					var timer;
						
					//非空验证
					if (isNaN(time) || time == ""){
						alert('请输入数字');
						return;
					}
					if (time < 1) {
						alert('请输入正确的数字');
						return;
					}
					if (unit == 0){
						alert('请选择时间单位');
						return;
					}
						totalSeconds = time * unit;
						
					addBut.disabled = 'disabled'
					//为10秒时字为红色
					function runner() {
						if (totalSeconds <= 10){
							clock.style.color = 'red';
						}
						if (totalSeconds < 1){
							clearInterval(timer)
							alert('时间到！！')
						}
						h = Math.floor(totalSeconds / 3600);
						 if (h< 10){h='0'+h};
						m = Math.floor((totalSeconds % 3600) /60);
						 if (m< 10){m='0'+m};
						s = totalSeconds % 60 ;
						 if (s< 10){s='0'+s};
						//	console.log(h + ':' + m + ':' + s)
						times = (h) + ':' + (m) + ':' + (s)
						clock.innerHTML = times
						
						totalSeconds--
					}
					timer = setInterval(runner ,1000)
					runner();
				}
			}
			countDonw()
		</script>
	</body>
</html>
